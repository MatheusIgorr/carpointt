<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CarPoint - Concessionária Premium</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* Reset e configurações básicas */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #890000;
            --primary-dark: #670000;
            --primary-light: #a80000;
            --secondary: #1a1a1a;
            --accent: #d4af37;
            --dark: #1e1e1e;
            --light: #ffffff;
            --gray-50: #f8f9fa;
            --gray-100: #e9ecef;
            --gray-200: #dee2e6;
            --gray-300: #ced4da;
            --gray-400: #adb5bd;
            --gray-500: #6c757d;
            --gray-600: #495057;
            --gray-700: #343a40;
            --gray-800: #212529;
            --gray-900: #121212;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            
            /* Tema claro (padrão) */
            --bg-primary: var(--light);
            --bg-secondary: var(--gray-50);
            --bg-card: var(--light);
            --text-primary: var(--gray-900);
            --text-secondary: var(--gray-600);
            --border-color: var(--gray-200);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        [data-theme="dark"] {
            --bg-primary: var(--gray-900);
            --bg-secondary: var(--gray-800);
            --bg-card: var(--gray-800);
            --text-primary: var(--light);
            --text-secondary: var(--gray-300);
            --border-color: var(--gray-700);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header e Navegação */
        header {
            background-color: var(--bg-card);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        .ex {
            color: black;
        }
        .logo i {
            color: red;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a.active {
            color: var(--primary);
            font-weight: 600;
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--bg-secondary);
            transform: rotate(180deg);
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-align: center;
            font-size: 0.95rem;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: 2px solid transparent;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #20c997);
            color: white;
            border: 2px solid transparent;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #1e7e34, var(--success));
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(137, 0, 0, 0.85), rgba(137, 0, 0, 0.9)), url('https://images.unsplash.com/photo-1494976388531-d1058494cdd8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            padding: 120px 0;
            height: calc(80vh - 70px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="%23ffffff" opacity="0.1"><polygon points="1000,100 1000,0 0,100"/></svg>');
            background-size: cover;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero p {
            font-size: 1.3rem;
            max-width: 700px;
            margin: 0 auto 40px;
            opacity: 0.95;
        }

        .hero .btn {
            font-size: 1.1rem;
            padding: 15px 35px;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .hero .btn:hover {
            background: white;
            color: var(--primary);
        }

        /* Seções */
        section {
            padding: 100px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-title h2 {
            font-size: 2.8rem;
            color: var(--primary);
            margin-bottom: 15px;
            font-weight: 700;
            position: relative;
            display: inline-block;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: var(--accent);
        }

        .section-title p {
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
            font-size: 1.1rem;
        }

        /* Veículos - Layout 3x2 */
        .vehicles-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }

        .vehicle-card {
            background-color: var(--bg-card);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .vehicle-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
        }

        .vehicle-img {
            height: 220px;
            width: 100%;
            background-color: var(--gray-300);
            background-size: cover;
            background-position: center;
            transition: transform 0.3s ease;
        }

        .vehicle-card:hover .vehicle-img {
            transform: scale(1.05);
        }

        .vehicle-info {
            padding: 25px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .vehicle-info h3 {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .vehicle-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .vehicle-price {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .vehicle-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
            flex: 1;
        }

        .vehicle-actions {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }

        .vehicle-actions .btn {
            flex: 1;
        }

        /* Controles de paginação */
        .pagination-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 40px;
        }

        .pagination-btn {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .pagination-btn:hover:not(:disabled) {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-indicator {
            font-weight: 600;
            color: var(--primary);
            font-size: 1.1rem;
        }

        /* Serviços */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .service-card {
            background-color: var(--bg-card);
            padding: 40px 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .service-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 25px;
            transition: transform 0.3s ease;
        }

        .service-card:hover .service-icon {
            transform: scale(1.1);
        }

        .service-card h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
            color: var(--text-primary);
        }

        .service-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .service-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
        }

        /* Sobre */
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .about-img {
            height: 450px;
            background-color: var(--gray-300);
            border-radius: 15px;
            background-image: url('https://images.unsplash.com/photo-1580273916550-e323be2ae537?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80');
            background-size: cover;
            background-position: center;
            box-shadow: var(--shadow-lg);
        }

        .about-text h3 {
            font-size: 2rem;
            margin-bottom: 25px;
            color: var(--primary);
            position: relative;
        }

        .about-text h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--accent);
        }

        .about-text p {
            margin-bottom: 20px;
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 1.05rem;
        }

        /* Contato */
        .contact-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 10px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .contact-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-lg);
        }

        .contact-icon {
            font-size: 1.8rem;
            color: var(--primary);
            min-width: 50px;
            text-align: center;
        }

        .contact-form {
            background-color: var(--bg-card);
            padding: 40px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(137, 0, 0, 0.1);
        }

        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--gray-900), var(--dark));
            color: white;
            padding: 80px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 25px;
            color: var(--accent);
            position: relative;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 40px;
            height: 2px;
            background: var(--primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #cbd5e1;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            background-color: var(--primary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #94a3b8;
            font-size: 0.9rem;
        }

        /* Modal de Login */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
            padding: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: var(--bg-card);
            width: 100%;
            max-width: 450px;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.3s ease;
            margin: auto;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.3s ease;
            z-index: 10;
            background: var(--bg-card);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            color: var(--primary);
            background: var(--bg-secondary);
        }

        .modal-title {
            text-align: center;
            margin-bottom: 25px;
            color: var(--primary);
            font-size: 1.6rem;
            padding-right: 30px;
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
            color: var(--text-secondary);
        }

        .form-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }

        /* Botão voltar ao topo */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
        }

        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
            color: var(--text-secondary);
            grid-column: 1 / -1;
        }

        .loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Novos estilos para os modais de detalhes e agendamento */
        .modal-large {
            max-width: 800px;
        }

        .vehicle-details-modal {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .vehicle-details-img {
            height: 280px;
            border-radius: 10px;
            background-size: cover;
            background-position: center;
            width: 100%;
        }

        .vehicle-details-info h3 {
            font-size: 1.6rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .vehicle-specs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
        }

        .spec-label {
            color: var(--text-secondary);
        }

        .spec-value {
            font-weight: 600;
        }

        .vehicle-description-full {
            margin: 20px 0;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .action-buttons .btn {
            flex: 1;
            padding: 12px 15px;
            font-size: 0.9rem;
        }

        /* Formulário de Agendamento WhatsApp */
        .whatsapp-form {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            max-width: 400px;
            margin: 0 auto;
        }

        .whatsapp-form .form-group {
            margin-bottom: 20px;
        }

        .whatsapp-btn {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .whatsapp-btn:hover {
            background: linear-gradient(135deg, #128C7E, #25D366);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Responsividade */
        @media (max-width: 1200px) {
            .vehicles-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .vehicles-grid {
                grid-template-columns: 1fr;
            }
            
            .modal {
                padding: 15px;
                align-items: flex-start;
            }
            
            .modal-content {
                padding: 25px 20px;
                max-height: 85vh;
                margin-top: 20px;
                margin-bottom: 20px;
            }
            
            .modal-title {
                font-size: 1.4rem;
                margin-bottom: 20px;
            }
            
            .vehicle-details-modal {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .vehicle-details-img {
                height: 200px;
            }
            
            .vehicle-details-info h3 {
                font-size: 1.4rem;
            }
            
            .vehicle-specs {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .whatsapp-form {
                padding: 20px;
            }
            
            .vehicle-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 576px) {
            .container {
                width: 95%;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .section-title h2 {
                font-size: 1.8rem;
            }
            
            .contact-form {
                padding: 25px;
            }
            
            .modal-content {
                padding: 20px 15px;
            }
            
            .whatsapp-form {
                padding: 15px;
            }
            
            .pagination-controls {
                flex-direction: column;
                gap: 15px;
            }
        }

        @media (max-width: 992px) {
            .about-content, .contact-container {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2.8rem;
            }
            
            section {
                padding: 80px 0;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-links {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .header-actions {
                width: 100%;
                justify-content: center;
            }
            
            .hero {
                padding: 80px 0;
                height: auto;
                min-height: 60vh;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .section-title h2 {
                font-size: 2.2rem;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Botão Voltar ao Topo -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <i class="fas fa-car"></i>
                    <span>CARPOINT</span>
                </div>
                <ul class="nav-links">
                    <li><a href="#home" class="active">Home</a></li>
                    <li><a href="#veiculos">Veículos</a></li>
                    <li><a href="#servicos">Serviços</a></li>
                    <li><a href="#sobre">Sobre</a></li>
                    <li><a href="#contato">Contato</a></li>
                </ul>
                <div class="header-actions">
                    <button class="theme-toggle" id="themeToggle" aria-label="Alternar tema">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="btn btn-outline" id="loginBtn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1>Encontre o Carro dos Seus Sonhos</h1>
                <p>Na CarPoint, oferecemos os melhores veículos premium com qualidade garantida e atendimento exclusivo.</p>
                <a href="#veiculos" class="btn">
                    <i class="fas fa-car"></i> <span class="ex">Explorar Veículos</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Veículos -->
    <section id="veiculos">
        <div class="container">
            <div class="section-title">
                <h2>Nossa Frota Completa</h2>
                <p>Conheça todos os veículos disponíveis em nossa concessionária.</p>
            </div>
            <div class="vehicles-grid" id="vehiclesGrid">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Carregando veículos...
                </div>
            </div>
            <div class="pagination-controls" id="paginationControls" style="display: none;">
                <button class="pagination-btn" id="prevPage">
                    <i class="fas fa-chevron-left"></i> Anterior
                </button>
                <span class="page-indicator" id="pageIndicator">Página 1 de 1</span>
                <button class="pagination-btn" id="nextPage">
                    Próxima <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Serviços -->
    <section id="servicos" style="background: var(--bg-secondary);">
        <div class="container">
            <div class="section-title">
                <h2>Nossos Serviços</h2>
                <p>Oferecemos uma gama completa de serviços especializados para cuidar do seu veículo.</p>
            </div>
            <div class="services-grid" id="servicesGrid">
                <!-- Serviços serão carregados dinamicamente do Supabase -->
            </div>
        </div>
    </section>

    <!-- Sobre -->
    <section id="sobre">
        <div class="container">
            <div class="section-title">
                <h2>Sobre Nós</h2>
                <p>Conheça a história e os valores que fazem da CarPoint a melhor escolha para você.</p>
            </div>
            <div class="about-content">
                <div class="about-img"></div>
                <div class="about-text">
                    <h3>Excelência Automotiva desde 2005</h3>
                    <p>Fundada com o propósito de revolucionar o mercado automotivo, a CarPoint nasceu da paixão por carros e do compromisso com a excelência no atendimento.</p>
                    <p>Ao longo dos anos, consolidamos nossa posição como referência no segmento premium através da transparência, qualidade e atendimento personalizado.</p>
                    <p>Nossa missão é proporcionar uma experiência única, desde a escolha do veículo ideal até os serviços de pós-venda, garantindo total satisfação e segurança.</p>
                    <a href="#contato" class="btn btn-primary">
                        <i class="fas fa-phone"></i> Fale Conosco
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Contato -->
    <section id="contato" style="background: var(--bg-secondary);">
        <div class="container">
            <div class="section-title">
                <h2>Entre em Contato</h2>
                <p>Estamos sempre prontos para atendê-lo e esclarecer todas as suas dúvidas.</p>
            </div>
            <div class="contact-container">
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <h3>Endereço</h3>
                            <p>Av. Paulista, 1000 - Jardins<br>São Paulo, SP - 01310-100</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div>
                            <h3>Telefone</h3>
                            <p>(11) 9999-9999</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h3>E-mail</h3>
                            <p>contato@carpoint.com.br</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <h3>Horário de Funcionamento</h3>
                            <p>Segunda a Sexta: 8h às 18h<br>Sábado: 8h às 12h</p>
                        </div>
                    </div>
                </div>
                <div class="contact-form">
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="name">Nome Completo</label>
                            <input type="text" id="name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="email">E-mail</label>
                            <input type="email" id="email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Telefone</label>
                            <input type="tel" id="phone" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="subject">Assunto</label>
                            <input type="text" id="subject" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Mensagem</label>
                            <textarea id="message" class="form-control" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            <i class="fas fa-paper-plane"></i> Enviar Mensagem
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>CarPoint</h3>
                    <p style="color: #cbd5e1; line-height: 1.6;">A melhor escolha para quem busca veículos premium e serviços automotivos de excelência.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Links Rápidos</h3>
                    <ul class="footer-links">
                        <li><a href="#home"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="#veiculos"><i class="fas fa-chevron-right"></i> Veículos</a></li>
                        <li><a href="#servicos"><i class="fas fa-chevron-right"></i> Serviços</a></li>
                        <li><a href="#sobre"><i class="fas fa-chevron-right"></i> Sobre Nós</a></li>
                        <li><a href="#contato"><i class="fas fa-chevron-right"></i> Contato</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Serviços</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Venda de Veículos</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Financiamento</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Manutenção</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Seguros</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Revisão Preventiva</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Newsletter</h3>
                    <p style="color: #cbd5e1; margin-bottom: 15px;">Inscreva-se para receber nossas ofertas exclusivas.</p>
                    <form id="newsletterForm">
                        <div class="form-group">
                            <input type="email" class="form-control" placeholder="Seu e-mail" required style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white;">
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                            <i class="fas fa-paper-plane"></i> Inscrever
                        </button>
                    </form>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 CarPoint. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Modal de Login -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close-modal" id="closeLoginModal">&times;</span>
            <h2 class="modal-title">Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">E-mail</label>
                    <input type="email" id="loginEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Senha</label>
                    <input type="password" id="loginPassword" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> Entrar
                </button>
                <div class="form-footer">
                    <p>Não tem uma conta? <a href="#" id="showRegister">Cadastre-se</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Cadastro -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <span class="close-modal" id="closeRegisterModal">&times;</span>
            <h2 class="modal-title">Cadastro</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">Nome Completo</label>
                    <input type="text" id="registerName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">E-mail</label>
                    <input type="email" id="registerEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerPhone">Telefone</label>
                    <input type="tel" id="registerPhone" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Senha</label>
                    <input type="password" id="registerPassword" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirmar Senha</label>
                    <input type="password" id="registerConfirmPassword" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-user-plus"></i> Cadastrar
                </button>
                <div class="form-footer">
                    <p>Já tem uma conta? <a href="#" id="showLogin">Faça login</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Detalhes do Veículo -->
    <div class="modal" id="vehicleDetailsModal">
        <div class="modal-content modal-large">
            <span class="close-modal" id="closeVehicleModal">&times;</span>
            <div class="vehicle-details-modal" id="vehicleDetailsContent">
                <!-- Conteúdo será preenchido dinamicamente -->
            </div>
        </div>
    </div>

    <!-- Modal de Agendamento via WhatsApp -->
    <div class="modal" id="whatsappModal">
        <div class="modal-content">
            <span class="close-modal" id="closeWhatsappModal">&times;</span>
            <h2 class="modal-title">Agendar Test Drive</h2>
            <div class="whatsapp-form">
                <div class="form-group">
                    <label for="clientName">Nome Completo</label>
                    <input type="text" id="clientName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="clientPhone">Telefone</label>
                    <input type="tel" id="clientPhone" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="clientEmail">E-mail</label>
                    <input type="email" id="clientEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="preferredDate">Data Preferida</label>
                    <input type="date" id="preferredDate" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="preferredTime">Horário Preferido</label>
                    <select id="preferredTime" class="form-control" required>
                        <option value="">Selecione um horário</option>
                        <option value="08:00">08:00</option>
                        <option value="09:00">09:00</option>
                        <option value="10:00">10:00</option>
                        <option value="11:00">11:00</option>
                        <option value="14:00">14:00</option>
                        <option value="15:00">15:00</option>
                        <option value="16:00">16:00</option>
                        <option value="17:00">17:00</option>
                    </select>
                </div>
                <button type="button" class="whatsapp-btn" id="sendWhatsapp">
                    <i class="fab fa-whatsapp"></i> Enviar via WhatsApp
                </button>
            </div>
        </div>
    </div>
    <script>
    // Configuração do Supabase
    const SUPABASE_URL = 'https://uxyveibzuxhnsuwhmuye.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4eXZlaWJ6dXhobnN1d2htdXllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxODM5NjMsImV4cCI6MjA3NDc1OTk2M30.6Sf71cyugYoDlOd2x55fYhGPokuFjZ0-5grAiL-yVao';
    
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // Elementos DOM
    const themeToggle = document.getElementById('themeToggle');
    const loginBtn = document.getElementById('loginBtn');
    const loginModal = document.getElementById('loginModal');
    const closeLoginModal = document.getElementById('closeLoginModal');
    const vehiclesGrid = document.getElementById('vehiclesGrid');
    const servicesGrid = document.getElementById('servicesGrid');
    const backToTop = document.getElementById('backToTop');

    // Estado da aplicação
    let currentPage = 1;
    const vehiclesPerPage = 6;
    let allVehicles = [];
    let currentUser = null;

    // Inicialização
    document.addEventListener('DOMContentLoaded', function() {
        initializeApp();
    });

    async function initializeApp() {
        // Verificar se usuário já está logado
        await checkCurrentUser();
        
        // Carregar veículos do Supabase
        await loadVehiclesFromSupabase();
        
        // Carregar serviços
        await loadServices();
        
        // Configurar event listeners
        setupEventListeners();
        
        // Configurar formulários
        setupForms();
    }

    async function checkCurrentUser() {
        try {
            const { data: { user }, error } = await supabase.auth.getUser();
            
            if (error) {
                console.error('Erro ao verificar usuário:', error);
                return;
            }
            
            if (user) {
                currentUser = user;
                updateUIForUser(user);
            }
        } catch (error) {
            console.error('Erro ao verificar usuário:', error);
        }
    }

    function updateUIForUser(user) {
        // Atualizar botão de login para mostrar que está logado
        if (loginBtn) {
            loginBtn.innerHTML = `<i class="fas fa-user"></i> ${user.email}`;
            loginBtn.classList.remove('btn-outline');
            loginBtn.classList.add('btn-primary');
            
            // Adicionar botão de admin se não existir
            if (!document.getElementById('adminBtn')) {
                const adminBtn = document.createElement('button');
                adminBtn.id = 'adminBtn';
                adminBtn.className = 'btn btn-success';
                adminBtn.innerHTML = '<i class="fas fa-cog"></i> Admin';
                adminBtn.onclick = redirectToAdmin;
                
                const headerActions = document.querySelector('.header-actions');
                if (headerActions) {
                    headerActions.insertBefore(adminBtn, loginBtn);
                }
            }
            
            // Adicionar botão de logout
            addLogoutButton();
        }
    }

    function redirectToAdmin() {
        if (currentUser) {
            window.location.href = 'admin.html';
        } else {
            openLoginModal();
        }
    }

    function addLogoutButton() {
        if (currentUser && !document.getElementById('logoutBtn')) {
            const logoutBtn = document.createElement('button');
            logoutBtn.id = 'logoutBtn';
            logoutBtn.className = 'btn btn-outline';
            logoutBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i> Sair';
            logoutBtn.onclick = handleLogout;
            
            const headerActions = document.querySelector('.header-actions');
            if (headerActions) {
                headerActions.appendChild(logoutBtn);
            }
        }
    }

    async function handleLogout() {
        try {
            const { error } = await supabase.auth.signOut();
            
            if (error) {
                throw error;
            }
            
            currentUser = null;
            
            // Restaurar botão de login
            if (loginBtn) {
                loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
                loginBtn.classList.remove('btn-primary');
                loginBtn.classList.add('btn-outline');
            }
            
            // Remover botão de admin
            const adminBtn = document.getElementById('adminBtn');
            if (adminBtn) {
                adminBtn.remove();
            }
            
            // Remover botão de logout
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.remove();
            }
            
            alert('Logout realizado com sucesso!');
            
        } catch (error) {
            console.error('Erro ao fazer logout:', error);
            alert('Erro ao fazer logout. Tente novamente.');
        }
    }

    async function loadVehiclesFromSupabase() {
        try {
            console.log('Buscando veículos do Supabase...');
            
            const { data: vehicles, error } = await supabase
                .from('veiculos')
                .select('*')
                .order('created_at', { ascending: false });

            if (error) {
                console.error('Erro ao buscar veículos:', error);
                vehiclesGrid.innerHTML = `
                    <div class="loading" style="grid-column: 1 / -1;">
                        <i class="fas fa-exclamation-triangle"></i> Erro ao carregar veículos: ${error.message}
                    </div>
                `;
                return;
            }

            console.log('Veículos encontrados:', vehicles);

            if (!vehicles || vehicles.length === 0) {
                vehiclesGrid.innerHTML = `
                    <div class="loading" style="grid-column: 1 / -1;">
                        <i class="fas fa-info-circle"></i> Nenhum veículo encontrado no banco de dados.
                    </div>
                `;
                return;
            }

            allVehicles = vehicles;
            displayVehicles(currentPage);
            
            if (allVehicles.length > vehiclesPerPage) {
                document.getElementById('paginationControls').style.display = 'flex';
            }
            
        } catch (error) {
            console.error('Erro ao carregar veículos:', error);
            vehiclesGrid.innerHTML = `
                <div class="loading" style="grid-column: 1 / -1;">
                    <i class="fas fa-exclamation-triangle"></i> Erro ao carregar veículos. Verifique o console para mais detalhes.
                </div>
            `;
        }
    }

    function displayVehicles(page) {
        const startIndex = (page - 1) * vehiclesPerPage;
        const endIndex = startIndex + vehiclesPerPage;
        const vehiclesToShow = allVehicles.slice(startIndex, endIndex);

        if (vehiclesToShow.length === 0) {
            vehiclesGrid.innerHTML = `
                <div class="loading" style="grid-column: 1 / -1;">
                    <i class="fas fa-info-circle"></i> Nenhum veículo para exibir.
                </div>
            `;
            return;
        }

        vehiclesGrid.innerHTML = vehiclesToShow.map(vehicle => `
            <div class="vehicle-card">
                <div class="vehicle-img" style="background-image: url('${vehicle.imagem_url || 'https://images.unsplash.com/photo-1555215695-3004980ad54e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'}')"></div>
                <div class="vehicle-info">
                    <h3>${vehicle.marca} ${vehicle.modelo}</h3>
                    <div class="vehicle-details">
                        <span><i class="fas fa-calendar-alt"></i> ${vehicle.ano}</span>
                        <span><i class="fas fa-tachometer-alt"></i> ${(vehicle.quilometragem || 0).toLocaleString()} km</span>
                        <span><i class="fas fa-gas-pump"></i> ${vehicle.combustivel || 'Não informado'}</span>
                    </div>
                    <div class="vehicle-price">R$ ${(vehicle.preco || 0).toLocaleString()}</div>
                    <p class="vehicle-description">${vehicle.descricao || 'Veículo em excelente estado, pronto para entrega.'}</p>
                    <div class="vehicle-actions">
                        <button class="btn btn-outline" onclick="openVehicleDetails(${vehicle.id})">
                            <i class="fas fa-info-circle"></i> Detalhes
                        </button>
                        <button class="btn btn-primary" onclick="openWhatsappModal('${vehicle.marca} ${vehicle.modelo}')">
                            <i class="fas fa-calendar-check"></i> Agendar
                        </button>
                    </div>
                </div>
            </div>
        `).join('');

        // Atualizar controles de paginação
        const totalPages = Math.ceil(allVehicles.length / vehiclesPerPage);
        document.getElementById('pageIndicator').textContent = `Página ${page} de ${totalPages}`;
        document.getElementById('prevPage').disabled = page === 1;
        document.getElementById('nextPage').disabled = page === totalPages;
    }

    async function openVehicleDetails(vehicleId) {
        try {
            // Buscar dados completos do veículo
            const { data: vehicle, error } = await supabase
                .from('veiculos')
                .select('*')
                .eq('id', vehicleId)
                .single();

            if (error) {
                console.error('Erro ao buscar detalhes do veículo:', error);
                alert('Erro ao carregar detalhes do veículo');
                return;
            }

            if (!vehicle) {
                alert('Veículo não encontrado');
                return;
            }

            const modalContent = document.getElementById('vehicleDetailsContent');
            modalContent.innerHTML = `
                <div class="vehicle-details-img" style="background-image: url('${vehicle.imagem_url || 'https://images.unsplash.com/photo-1555215695-3004980ad54e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'}')"></div>
                <div class="vehicle-details-info">
                    <h3>${vehicle.marca} ${vehicle.modelo}</h3>
                    <div class="vehicle-specs">
                        <div class="spec-item">
                            <span class="spec-label">Ano:</span>
                            <span class="spec-value">${vehicle.ano}</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">Quilometragem:</span>
                            <span class="spec-value">${(vehicle.quilometragem || 0).toLocaleString()} km</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">Combustível:</span>
                            <span class="spec-value">${vehicle.combustivel || 'Não informado'}</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">Câmbio:</span>
                            <span class="spec-value">${vehicle.cambio || 'Não informado'}</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">Cor:</span>
                            <span class="spec-value">${vehicle.cor || 'Não informado'}</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">Portas:</span>
                            <span class="spec-value">${vehicle.portas || '4'}</span>
                        </div>
                        ${vehicle.potencia ? `
                        <div class="spec-item">
                            <span class="spec-label">Potência:</span>
                            <span class="spec-value">${vehicle.potencia}</span>
                        </div>
                        ` : ''}
                        ${vehicle.carroceria ? `
                        <div class="spec-item">
                            <span class="spec-label">Carroceria:</span>
                            <span class="spec-value">${vehicle.carroceria}</span>
                        </div>
                        ` : ''}
                    </div>
                    <div class="vehicle-price" style="font-size: 2rem;">R$ ${(vehicle.preco || 0).toLocaleString()}</div>
                    <p class="vehicle-description-full">${vehicle.descricao || 'Veículo em excelente estado de conservação, com toda a documentação em dia e pronto para entrega.'}</p>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="openWhatsappModal('${vehicle.marca} ${vehicle.modelo}')">
                            <i class="fas fa-calendar-check"></i> Agendar Test Drive
                        </button>
                        <button class="btn btn-outline" onclick="simulateFinancing('${vehicle.marca} ${vehicle.modelo}', ${vehicle.preco || 0})">
                            <i class="fas fa-calculator"></i> Simular Financiamento
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('vehicleDetailsModal').style.display = 'flex';
            
        } catch (error) {
            console.error('Erro ao abrir detalhes do veículo:', error);
            alert('Erro ao carregar detalhes do veículo');
        }
    }

    function openWhatsappModal(serviceOrVehicleName) {
        // Preencher o campo oculto com o nome do serviço/veículo
        sessionStorage.setItem('selectedService', serviceOrVehicleName);
        document.getElementById('whatsappModal').style.display = 'flex';
    }

    function simulateFinancing(vehicleName, price) {
        const entrada = price * 0.2; // 20% de entrada
        const parcelas = 60; // 60 meses
        const juros = 0.012; // 1.2% ao mês
        const valorFinanciado = price - entrada;
        const parcela = (valorFinanciado * juros) / (1 - Math.pow(1 + juros, -parcelas));
        
        alert(`Simulação para ${vehicleName}:\n\n` +
              `Valor: R$ ${price.toLocaleString()}\n` +
              `Entrada (20%): R$ ${entrada.toLocaleString()}\n` +
              `Financiado: R$ ${valorFinanciado.toLocaleString()}\n` +
              `Parcelas: ${parcelas}x de R$ ${parcela.toFixed(2)}\n\n` +
              `Entre em contato para condições especiais!`);
    }

    function setupEventListeners() {
        // Toggle de tema
        themeToggle.addEventListener('click', toggleTheme);

        // Modal de login
        loginBtn.addEventListener('click', () => loginModal.style.display = 'flex');
        document.getElementById('closeLoginModal').addEventListener('click', () => loginModal.style.display = 'none');
        document.getElementById('showRegister').addEventListener('click', (e) => {
            e.preventDefault();
            loginModal.style.display = 'none';
            document.getElementById('registerModal').style.display = 'flex';
        });

        // Modal de cadastro
        document.getElementById('closeRegisterModal').addEventListener('click', () => document.getElementById('registerModal').style.display = 'none');
        document.getElementById('showLogin').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('registerModal').style.display = 'none';
            loginModal.style.display = 'flex';
        });

        // Modal de detalhes do veículo
        document.getElementById('closeVehicleModal').addEventListener('click', () => document.getElementById('vehicleDetailsModal').style.display = 'none');

        // Modal do WhatsApp
        document.getElementById('closeWhatsappModal').addEventListener('click', () => document.getElementById('whatsappModal').style.display = 'none');
        document.getElementById('sendWhatsapp').addEventListener('click', sendWhatsappMessage);

        // Paginação
        document.getElementById('prevPage').addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                displayVehicles(currentPage);
            }
        });

        document.getElementById('nextPage').addEventListener('click', () => {
            const totalPages = Math.ceil(allVehicles.length / vehiclesPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                displayVehicles(currentPage);
            }
        });

        // Fechar modais ao clicar fora
        window.addEventListener('click', (e) => {
            if (e.target === loginModal) loginModal.style.display = 'none';
            if (e.target === document.getElementById('registerModal')) document.getElementById('registerModal').style.display = 'none';
            if (e.target === document.getElementById('vehicleDetailsModal')) document.getElementById('vehicleDetailsModal').style.display = 'none';
            if (e.target === document.getElementById('whatsappModal')) document.getElementById('whatsappModal').style.display = 'none';
        });

        // Scroll suave para links internos
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Botão voltar ao topo
        window.addEventListener('scroll', toggleBackToTop);
        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    }

    function setupForms() {
        // Formulário de contato
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Mensagem enviada com sucesso! Entraremos em contato em breve.');
            this.reset();
        });

        // Formulário de newsletter
        document.getElementById('newsletterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Inscrição realizada com sucesso! Obrigado.');
            this.reset();
        });

        // Formulário de login
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });

                if (error) {
                    throw error;
                }

                currentUser = data.user;
                updateUIForUser(data.user);
                alert('Login realizado com sucesso!');
                loginModal.style.display = 'none';
                this.reset();
                
            } catch (error) {
                console.error('Erro no login:', error);
                alert('Erro no login: ' + error.message);
            }
        });

        // Formulário de cadastro
        document.getElementById('registerForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (password !== confirmPassword) {
                alert('As senhas não coincidem!');
                return;
            }
            
            try {
                const { data, error } = await supabase.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        data: {
                            name: name,
                            phone: phone
                        }
                    }
                });

                if (error) {
                    throw error;
                }

                alert('Cadastro realizado com sucesso! Verifique seu email para confirmar a conta.');
                document.getElementById('registerModal').style.display = 'none';
                this.reset();
                
            } catch (error) {
                console.error('Erro no cadastro:', error);
                alert('Erro no cadastro: ' + error.message);
            }
        });
    }

    function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        themeToggle.innerHTML = newTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        
        // Salvar preferência no localStorage
        localStorage.setItem('theme', newTheme);
    }

    function toggleBackToTop() {
        if (window.pageYOffset > 300) {
            backToTop.classList.add('visible');
        } else {
            backToTop.classList.remove('visible');
        }
    }

    function sendWhatsappMessage() {
        const name = document.getElementById('clientName').value;
        const phone = document.getElementById('clientPhone').value;
        const email = document.getElementById('clientEmail').value;
        const date = document.getElementById('preferredDate').value;
        const time = document.getElementById('preferredTime').value;
        const service = sessionStorage.getItem('selectedService') || 'Serviço';

        if (!name || !phone || !email || !date || !time) {
            alert('Por favor, preencha todos os campos obrigatórios.');
            return;
        }

        const message = `Olá! Gostaria de agendar um test drive/horário:\n\n` +
                       `*Nome:* ${name}\n` +
                       `*Telefone:* ${phone}\n` +
                       `*E-mail:* ${email}\n` +
                       `*Data Preferida:* ${date}\n` +
                       `*Horário Preferido:* ${time}\n` +
                       `*Interesse:* ${service}\n\n` +
                       `Aguardo o retorno!`;

        const whatsappUrl = `https://wa.me/5511999999999?text=${encodeURIComponent(message)}`;
        window.open(whatsappUrl, '_blank');
        document.getElementById('whatsappModal').style.display = 'none';
        
        // Limpar formulário
        document.getElementById('clientName').value = '';
        document.getElementById('clientPhone').value = '';
        document.getElementById('clientEmail').value = '';
        document.getElementById('preferredDate').value = '';
        document.getElementById('preferredTime').value = '';
    }

    async function loadServices() {
        try {
            // Buscar serviços do Supabase
            const { data: services, error } = await supabase
                .from('servicos')
                .select('*')
                .order('nome');

            if (error) {
                console.error('Erro ao buscar serviços:', error);
                // Fallback para serviços mockados
                loadMockServices();
                return;
            }

            if (!services || services.length === 0) {
                loadMockServices();
                return;
            }

            const servicesGrid = document.getElementById('servicesGrid');
            servicesGrid.innerHTML = services.map(service => `
                <div class="service-card">
                    <div class="service-icon">
                        <i class="${service.icone || 'fas fa-cogs'}"></i>
                    </div>
                    <h3>${service.nome}</h3>
                    <p class="service-description">${service.descricao || 'Serviço profissional para seu veículo.'}</p>
                    <div class="service-price">${service.preco || 'Sob consulta'}</div>
                    <button class="btn btn-outline" onclick="openWhatsappModal('${service.nome}')">
                        <i class="fas fa-calendar-check"></i> Agendar
                    </button>
                </div>
            `).join('');

        } catch (error) {
            console.error('Erro ao carregar serviços:', error);
            loadMockServices();
        }
    }

    function loadMockServices() {
        // Fallback caso não haja serviços no Supabase
        const mockServices = [
            {
                id: 1,
                name: 'Revisão Preventiva',
                description: 'Serviço completo de revisão preventiva com troca de óleo, filtros e verificação de todos os sistemas do veículo.',
                price: 'A partir de R$ 299',
                icon: 'fas fa-tools'
            },
            {
                id: 2,
                name: 'Manutenção Corretiva',
                description: 'Reparos e manutenções necessárias para garantir o perfeito funcionamento do seu veículo.',
                price: 'Sob consulta',
                icon: 'fas fa-wrench'
            },
            {
                id: 3,
                name: 'Troca de Pneus',
                description: 'Serviço especializado em troca e balanceamento de pneus, com as melhores marcas do mercado.',
                price: 'A partir de R$ 399',
                icon: 'fas fa-tachometer-alt'
            },
            {
                id: 4,
                name: 'Alinhamento e Balanceamento',
                description: 'Alinhamento 3D e balanceamento computadorizado para garantir segurança e conforto na direção.',
                price: 'A partir de R$ 149',
                icon: 'fas fa-cogs'
            }
        ];

        const servicesGrid = document.getElementById('servicesGrid');
        servicesGrid.innerHTML = mockServices.map(service => `
            <div class="service-card">
                <div class="service-icon">
                    <i class="${service.icon}"></i>
                </div>
                <h3>${service.name}</h3>
                <p class="service-description">${service.description}</p>
                <div class="service-price">${service.price}</div>
                <button class="btn btn-outline" onclick="openWhatsappModal('${service.name}')">
                    <i class="fas fa-calendar-check"></i> Agendar
                </button>
            </div>
        `).join('');
    }

    // Verificar tema salvo ao carregar a página
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    themeToggle.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';

    // Funções globais
    window.openVehicleDetails = openVehicleDetails;
    window.openWhatsappModal = openWhatsappModal;
    window.simulateFinancing = simulateFinancing;
</script>
    <script src="estilo.js"></script>
    <script src="script.js"></script>
</body>
</html>